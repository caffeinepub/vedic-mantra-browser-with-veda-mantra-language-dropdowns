{
  "kind": "build_request",
  "title": "Fix missing Mantra 47 option in mantra number dropdown",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Ensure the backend `getMantraNumbers(#samaVeda)` query returns a list that includes mantra number 47 and is consistently ordered and de-duplicated.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "Still 47 mantra is not showing in the dropdown"
        ]
      },
      "acceptanceCriteria": [
        "Calling `getMantraNumbers(#samaVeda)` returns an array containing `47`.",
        "The returned array is sorted ascending and contains no duplicates.",
        "No other backend query methods regress (meaning/text/metadata/audio still work as before)."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Update the Mantra Number dropdown options rendering so that mantra 47 is visible/selectable when Samaveda is selected, and add a clear, user-visible diagnostic message (English) if the backend returns mantra numbers for Samaveda but 47 is unexpectedly missing.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "Still 47 mantra is not showing in the dropdown"
        ]
      },
      "acceptanceCriteria": [
        "When the user selects Samaveda, the Mantra Number dropdown list includes option \"47\".",
        "If Samaveda is selected and the loaded mantra numbers do not include \"47\", the UI shows an English warning in the selection area that explicitly states that 47 is missing and lists the received options.",
        "Selecting \"47\" updates the Select trigger to display \"47\" and the page loads text/meaning/metadata for Samaveda mantra 47 (no blank trigger state)."
      ]
    },
    {
      "id": "REQ-3",
      "text": "Set sensible initial defaults so the app does not appear empty in a fresh session when only a small set of mantras exists (e.g., auto-select Samaveda if it is the only Veda with available mantras; otherwise keep current default behavior).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "Still 47 mantra is not showing in the dropdown"
        ]
      },
      "acceptanceCriteria": [
        "On first load (no deep link), if only one Veda has any mantra numbers available, that Veda is selected automatically.",
        "After the Veda is auto-selected, the first available mantra number is auto-selected and displayed in the dropdown trigger."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor in `backend/main.mo`.",
    "Do not edit files under `frontend/src/hooks/useInternetIdentity.ts`, `frontend/src/hooks/useInternetIdentity.tsx`, `frontend/src/hooks/useActor.ts`, `frontend/src/main.tsx`, or anything in `frontend/src/components/ui` (compose/consume only).",
    "Use English for any user-facing text."
  ],
  "nonGoals": [
    "Adding new mantra content beyond what is required to make Mantra 47 appear correctly.",
    "Adding new authentication methods beyond Internet Identity.",
    "Adding real-time updates or push notifications."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}